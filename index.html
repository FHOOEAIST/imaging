<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/markdown/index.md at 2021-02-15
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>Imaging &#x2013; Imaging</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><img src="images/bannerLeft.png"  alt="AIST"/></div>
</div>
          <div class="pull-right"><div id="bannerRight"><img src="images/bannerRight.png"  alt="Imaging"/></div>
</div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2021-02-15<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.1.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Imaging</li>
    <li class="active"><a href="#"><span class="none"></span>Overview</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="changelog.html" title="Changelog"><span class="none"></span>Changelog</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
     <ul class="nav nav-list">
      <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
      <li><a href="dependency-convergence.html" title="Dependency Convergence"><span class="none"></span>Dependency Convergence</a></li>
      <li><a href="dependency-info.html" title="Dependency Information"><span class="none"></span>Dependency Information</a></li>
      <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
      <li class="active"><a href="#"><span class="none"></span>About</a></li>
      <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
      <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
      <li><a href="modules.html" title="Project Modules"><span class="none"></span>Project Modules</a></li>
      <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
      <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
      <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
      <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
      <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
     </ul></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Imaging</h1>
<p>The imaging framework provides different functionality in the context of image processing and computer vision.</p><section>
<h2><a name="Notes"></a>Notes</h2>
<p>The imaging project highly uses Project Lombok. So if you use IntelliJ for development, it is recommended to install the <a class="externalLink" href="https://plugins.jetbrains.com/plugin/6317-lombok/">Lombok IntelliJ plugin</a>.</p>
<ul>

<li>Install lombok plugin: File -&gt; Settings -&gt; Plugins -&gt; Search for Lombok -&gt; Install Lombok</li>
<li>Activate Annotation Processor: File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Annotation Processor -&gt; Enable annotation processing</li>
</ul></section><section>
<h2><a name="Functionality"></a>Functionality</h2>
<p>This project provides image processing, computer vision and geometric methods. The basis is the API module which contains 2D and 3D domain classes. The lowest common denominator of those domain classes are 3D respectively 2D points.</p>
<p>The functionality is separated into two main modules with sub modules, described below.</p>
<ul>

<li><b>api</b>: Is the base module of the imaging project containing <b>domain objects</b> for images, geometric figures (e.g. points, lines, rectangles, &#x2026;), color representations and more. Also contains some further functionality as interfaces, transformers and utility classes (e.g. for type checking of images).</li>
<li><b>core</b>: Core consists of basic implementations for image and geometric processing. <a href="service/service_core.html">See here for a more detailed description&#x2026;</a></li>
<li><b>imagej</b>: Connector module to <a class="externalLink" href="https://imagej.net/">ImageJ</a></li>
<li><b>nd4j</b>: Connector module to <a class="externalLink" href="https://github.com/deeplearning4j/nd4j">ND4J</a></li>
<li><b>microsoftcognitiveservices</b>: This module wraps the functionality of Microsoft&#xb4;s Cognitive Services and is currently used for face detection.</li>
<li><b>opencv</b>: This module is the core computer vision implementation and uses the <a class="externalLink" href="https://github.com/FHOOEAIST/aistcv">AistCV (OpenCV Java Wrapper)</a> <a href="service/opencv_module.html">See here for a more detailed description&#x2026;</a></li>
<li><b>openimaj</b>: Connector module to <a class="externalLink" href="http://openimaj.org/">OpenIMAJ</a></li>
<li><b>tesseract</b>: This module covers OCR methods based on the <a class="externalLink" href="https://github.com/bytedeco/javacpp-presets">javacpp</a> wrapper of the <a class="externalLink" href="https://github.com/tesseract-ocr/tesseract">tesseract framework</a>.</li>
<li><b>pdfbox</b>: This module provides some .pdf file functionality based on org.apache.pdfbox</li>
</ul>
<p><img src="documentation/imaging_structure.png" alt="Imaging module structure" /></p></section><section>
<h2><a name="Image_Definitions"></a>Image Definitions</h2><section>
<h3><a name="Image_wrappers"></a>Image wrappers</h3>
<p>We currently have wrapper implementations for the following images, all of them can only be created using the specific ImageFactory, that are in turn obtained from typed based ImageFactoryFactory.</p>
<p><img src="documentation/imagefactory.png" alt="imagefactory" /></p><section>
<h4><a name="API_Module"></a>API Module</h4>
<ul>

<li>ImageWrapper&lt;Short[][][]&gt; (Image2ByteFactory): Image type using 2-bytes per pixel. That leads to low storage requirements. Use e.g. the factory&#x2019;s image provider Image2ByteFactory to create one. Note that also if the basic pixel based set/get methods are double based, the floating point precision is lost with this type of image!</li>
<li>ImageWrapper&lt;Double[][][]&gt; (Image8ByteFactory): Image type using 8-bytes per pixel. Concern the high storage requirements - only use it if really necessary! Use e.g. the factory&#x2019;s image provider Image8ByteFactory to create one.</li>
<li>ImageWrapper&lt;BufferedImage&gt; (BufferedImageFactory): Implementation for connecting Java&#x2019;s BufferedImage to our framework. Use e.g. the factory&#x2019;s image provider BufferedImageFactory to create one.</li>
</ul>
<p><b>Note:</b> Usually use the Image2ByteFactory to get a 2 byte precision image (ImageWrapper&lt;short[][][]&gt;), the 8 byte precision image (ImageWrapper&lt;double[][][]&gt;) should only be used in special cases, when the floating point precision is required, because of the increased storage requirements.</p></section><section>
<h4><a name="OpenCV_Module"></a>OpenCV Module</h4>
<ul>

<li>ImageWrapper&lt;Mat&gt; (OpenCVFactory): Represents the interface from our imaging framework to the OpenCV framework (based on the <a class="externalLink" href="https://github.com/FHOOEAIST/aistcv">AistCV</a> wrapper). You can also use the factory&#x2019;s image provider OpenCVFactory to create one.</li>
</ul>
<p>In addition to the base ImageWrapper there is also a SubImageWrapperclass, that represents a ROI of a referenced image.</p></section><section>
<h4><a name="ImageJ_Module"></a>ImageJ Module</h4>
<ul>

<li>ImageWrapper&lt;ImageProcessor&gt; (ImageProcessorFactory): Wrapper implementation to ImageJ&#x2019;s <a class="externalLink" href="https://imagej.nih.gov/ij/developer/api/ij/process/ImageProcessor.html">ImageProcessor</a>, that supports images with 1 to 3 channels.</li>
<li>ImageWrapper&lt;ImageStack&gt; (ImageStackFactory):: Wrapper implementation to ImageJ&#x2019;s <a class="externalLink" href="https://imagej.nih.gov/ij/developer/api/ij/ImageStack.html">ImageStack</a>, that are stacked <a class="externalLink" href="https://imagej.nih.gov/ij/developer/api/ij/process/ImageProcessor.html">ImageProcessor</a>s of same size.</li>
</ul></section><section>
<h4><a name="ND4j_Module"></a>ND4j Module</h4>
<ul>

<li>ImageWrapper&lt;INDArray&gt; (IndArrayFactory): Wrapper implementation to ND4J&#x2019;s <a class="externalLink" href="https://deeplearning4j.org/api/latest/org/nd4j/linalg/api/ndarray/INDArray.html">INDArray</a>.</li>
</ul></section><section>
<h4><a name="OpenIMAJ_Module"></a>OpenIMAJ Module</h4>
<ul>

<li>ImageWrapper&lt;MBFImage&gt; (MBFImageFactory): Wrapper implementation to OpenIMAJ&#x2019;s <a class="externalLink" href="http://openimaj.org/apidocs/org/openimaj/image/MBFImage.html">MBFImage</a>.</li>
<li>ImageWrapper&lt;FImage&gt; (FImageFactory): Wrapper implementation to OpenIMAJ&#x2019;s <a class="externalLink" href="http://openimaj.org/apidocs/org/openimaj/image/FImage.html">FImage</a>.</li>
</ul></section></section><section>
<h3><a name="Image_function"></a>Image function</h3>
<p>The API module contains the ImageFunction interface, which is considered as basis for image processing methods. Using this interface allows us to create image processing chains, which are easy to read and also more efficient (Java garbage collector is able to close resources faster), see example below. Current implementations still have to be adapted as far as possible, but this is a bit of future thinking.</p>

<div>
<div>
<pre class="source">// Example from the PASS project, which uses OpenCVDistanceMap implementation.
ImageFunction.closeAfterApply(openCVDistanceMap)
                         .compose((Function&lt;JavaImage, ImageWrapper&lt;Mat&gt;&gt;) imageTransformer::from)
                         .andThen(ImageFunction.closeAfterApply(GraphStructuralElementToGraphRoomTransformer::openCVDistanceMapToJava))
                         .apply(ji);

// Example from Image2ByteSaver
new BufferedImageSaver()
                        .accept(((Function&lt;ImageWrapper&lt;short[][][]&gt;, ImageWrapper&lt;double[][][]&gt;&gt;)transformer8ByteTo2Byte::to)
                        .andThen(image8ByteToBufferedImageTransformer::to)
                        .apply(image), fileName);

</pre></div></div>
</section><section>
<h3><a name="Coordinate_System"></a>Coordinate System</h3>
<p>In the imaging project we are using a classic image coordinate system with a top/left origin.</p>
<p><img src="documentation/image-coordinate-system.png" alt="Image Coordinate system" /></p></section><section>
<h3><a name="Color_Ranges"></a>Color Ranges</h3>
<p>The following color ranges are used inside the imaging project:</p>
<ul>

<li>binary: (0, 255)</li>
<li>greyscale: (0 - 255)</li>
<li>rgb/bgr: (0-255) (0-255) (0-255)</li>
<li>hsv: (0.0 - 360.0) (0.0 - 1.0) (0.0 - 1.0)</li>
<li>yuv: (0.0 - 1.0) (-1.0 - 1.0) (-1.0 - 1.0)</li>
<li>luv: (0.0 - 100.0), (-134.0 - 220.0), (-140.0 - 122.0)</li>
</ul></section></section><section>
<h2><a name="Architecture_of_geometric_domain_classes"></a>Architecture of geometric domain classes</h2>
<p>In the Imaging project we are using a coordinate system with x-axis for width information (abscissa axis), y-axis for length information (ordinata axis) and z-axis for height information (applica axis). This can be seen in the following coordinate systems.</p>
<p><img src="documentation/coordinate-systems.png" alt="Coordinate systems" /></p>
<p>The base class of the geometric classes is <b>AbstractJavaPoint</b> with its derivates <b>JavaPoint3D</b> and <b>JavaPoint2D</b>. The <b>JavaPoint2D</b> hides the z-coordinate. All other geometric classes are reusing either the 3D or the 2D point respectively another class wrapping those classes. The architecture consists of abstract base classes contained in science.aist.imaging.api.domain, which are implemented for 3D purposes in science.aist.imaging.api.domain.threedimensional and for 2D purposes in science.aist.imaging.api.domain.twodimensional. All 2D domain classes end with 2D in the name and all 3D domain classes with 3D. The other main geometric classes are:</p>
<ul>

<li>AbstractJavaLine: Representing a line between two points</li>
<li>AbstractJavaPolygon: Representing any area defined by a given line-strip</li>
<li>AbstractJavaPointCloud: Representing any amount of points</li>
</ul>
<p><b>Note</b> the semantic difference between AbstractJavaPointCloud and AbstractJavaPolygon, where the first one represents any unordered amount of points, and a polygon represents an ordered list of points, which are connected defined by the order.</p>
<p>All geometric domain classes are <b>rich</b> classes with different functions and are <b>unmodifiable</b>.</p>
<p>The rough architecture (without the domain functions) of the most important domain classes looks like:</p>
<p><img src="documentation/geometric_domainclases.png" alt="Geometric Domain classes" /></p></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2021
<a href="https://aist.science">Advanced Information Systems and Technology</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>