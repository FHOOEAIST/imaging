<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/markdown/service/opencv_module.md at 2021-02-05
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>Imaging &#x2013; OpenCV</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><img src="../images/bannerLeft.png"  alt="AIST"/></div>
</div>
          <div class="pull-right"><div id="bannerRight"><img src="../images/bannerRight.png"  alt="Imaging"/></div>
</div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2021-02-05<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Imaging</li>
    <li><a href="../index.html" title="Overview"><span class="none"></span>Overview</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>OpenCV</h1>
<p>This service module is based on our own OpenCV wrapper <a class="externalLink" href="https://github.com/FHOOEAIST/aistcv">AistCV</a> and extends the core functionality via opencv.</p><section>
<h2><a name="Notes"></a>Notes</h2>
<p>Before using any of the OpenCV implementations, you have to load the native library with: science.aist.aistcv.AistCVLoader.loadShared();. Use this as the first statement of your main method or with @BeforeClass (or in a static constructor of an abstract class if using testng) in test classes.</p>
<p>The main domain object for this module is the OpenCVImageWrapper, which encapsulates the OpenCV Mat class. Use the OpenCVFactory to create such a wrapper object.</p><section>
<h3><a name="Warning"></a>Warning</h3>
<p>Since this is based on a C++ framework, Java does not know anything about allocated native objects (e.g. Mat), and it is not able to release that objects automatically. This is the reason for the wrapper class. Problem with the wrapper, Java still can&#x2019;t see the C++ side, so for Java an OpenCVImageWrapper has a reference to a Mat which only consists of an id. So Java thinks that e.g. a ImageWrapper that contains a 8k-image is circa just as big as the long id and for this will only rarely release images.</p>
<p>This is the reason why you have to make sure <b>manually</b> to always release not required images!</p>
<p>There are three ways:</p>
<p>0.) Use close() manually, but you have to make sure that the method is called <b>in any case</b>. (not recommended)</p>
<p>1.) Using Java&#x2019;s try-with-resources feature</p>

<div>
<div>
<pre class="source">try(ImageWrapper&lt;Mat&gt; image = ...){
    // do something with the image
}
</pre></div></div>

<p>This has the disadvantage for nested blocks if you have multiple images</p>

<div>
<div>
<pre class="source">try(ImageWrapper&lt;Mat&gt; image1 = ...){
    try(ImageWrapper&lt;Mat&gt; image2 = ...){
        try(ImageWrapper&lt;Mat&gt; image3 = ...){
            // do something with the image
        }
    }
}
</pre></div></div>

<p>2.) Use the @Cleanup annotation of Lombok that generates try-finally-blocks in the corresponding .class files. (<b>recommended version</b>)</p>

<div>
<div>
<pre class="source">@Cleanup(&quot;close&quot;) ImageWrapper&lt;Mat&gt; image1 = ...
@Cleanup(&quot;close&quot;) ImageWrapper&lt;Mat&gt; image2 = ...
@Cleanup(&quot;close&quot;) ImageWrapper&lt;Mat&gt; image3 = ...
// native images:
@Cleanup(&quot;release&quot;) Mat image4 = ...
@Cleanup(&quot;release&quot;) Mat image5 = ...
@Cleanup(&quot;release&quot;) Mat image6 = ...
</pre></div></div>

<p>The same mechanism works for any other native object as MatOfKeyPoint.</p></section></section><section>
<h2><a name="Functionality"></a>Functionality</h2>
<p>The OpenCV module consist of following packages:</p>
<ul>

<li><b>averaging</b>: Contains average filters for calculating average pixels of multiple images</li>
<li><b>compare</b>: This package consists of different functions to compare two images. This allows you to check if those images are equal or to calculate image shifts and rotations between those.</li>
<li><b>contour</b>: This package contains functions to find contours in images or to calculate a morphological skeleton.</li>
<li><b>contrast</b>: Contains contrast adapting functions.</li>
<li><b>conversion</b>: Contains functions for converting images to grayscale, HSV representation or inverting the image.</li>
<li><b>distance</b>: Contains functionality to calculate a distance map of a given image.</li>
<li><b>domain</b>: Contains different domain classes wrapping e.g. int enum values of OpenCV.</li>
<li><b>draw</b>: Contains Consumer&lt;ImageWrapper&lt;Mat&gt;&gt; implementations for manipulating a given image by drawing circles, features, lines, polygons or rectangle onto it.</li>
<li><b>edgedection</b>: Contains implementations for applying canny or sobel edge detections onto an image.</li>
<li><b>featureextraction</b>: This package contains classes to extract features of a given image.</li>
<li><b>filter</b>: Contains image filters e.g. for adapting the image brightness</li>
<li><b>fitnessfunction</b>: Contains a FitnessFunction for calculating SumOfSquareDifferences</li>
<li><b>houghspace</b>: Allows doing calculations in the hough space as finding lines in an image.</li>
<li><b>lowpassfilter</b>: This package contains lowpass filters as a gauss blurring filter, as well as sharpen filters.</li>
<li><b>morphology</b>: This package contains morphological transformations as thinning.</li>
<li><b>objectdetection</b>: Contains different object detector implementations.</li>
<li><b>optimization</b>: Contains implementation of the Optimizer Interface which is used to improve the quality and/or speed of image processing algorithms.</li>
<li><b>positioning</b>: Provides functionality to detect the position of an object in the image based on a given grid for calibration, or a given object size.</li>
<li><b>registration</b>: Contains functionality for image registration as Implementation Image Alignment (ECC).</li>
<li><b>storage</b>: Contains a Function, and a Consumer for loading/saving image from/to disc.</li>
<li><b>threshold</b>: Contains a ImageFunction for thresholding an image.</li>
<li><b>transformation</b>: Contains image transformation functions for e.g. translating, rotating, cropping, padding or resizing a OpenCV image.</li>
<li><b>transformers</b>: The transformers package consists of transformers between OpenCV and  imaging project domain objects.</li>
<li><b>wrapper</b>: Consists of wrappers for OpenCV domain objects as Mat, Line or Point. Also contains the OpenCVImageWrapperFactory.</li>
</ul></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2021
<a href="https://aist.science">Advanced Information Systems and Technology</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>